<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <title>Lerja</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div data-header id="header" class="header">
        <nav data-nav id="nav"></nav>
    </div>

    <section id="nyhed">
        <h2 data-titel></h2>
    </section>

    <!--    SCRIPT START   -->
    <script src="nav.js"></script>
    <script>
        let retter;
        let minTemplate = document.querySelector("#myTemplate");

        async function hentJson() {
            // Hent json
            let jsonObjekt = await fetch("http://kea.jonascisum.dk/kea/eksamen-02/lerja/wordpress/wp-json/wp/v2/nyheder?per_page=100");
            //Vis objekt som tekst
            retter = await jsonObjekt.json();

            visSteder();

            console.log(jsonObjekt);

        }

        // Lav en klon af template
        function visSteder() {
            //kÃ¸r json array igennem og lav en klon af template
            retter.forEach(hverSted => {
                let klon = minTemplate.cloneNode(true).content;
                klon.querySelector("[data-titel]").textContent = hverSted.title.rendered;
                klon.querySelector("[data-single]").href = "single.html?id=" + hverSted.id;
                document.querySelector("#steder_section").appendChild(klon);
            })
        }

        document.querySelector("[data-titel]").textContent = retter.title.rendered;

        // Vis template i DOM

        document.addEventListener("DOMContentLoaded", hentJson);

    </script>
</body>

</html>
